<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:gui="http://community/localSwap/gui">

  <!-- Root GUI application model -->
  <gui:GUIModel
      xmi:id="_GUIModel"
      name="LocalSwapApp"
      package="com.example.community_platform"
      versionCode="1"
      versionName="1.0"
      description="GUI model for the community item exchange platform."
      screenCompatibility="true">

    <!-- App-level branding / meta view definition -->
    <viewComponent
        xmi:id="_ViewComponent"
        name="LocalSwapViewComponent"
        description="Local community item exchange app"/>

    <!-- Main module containing all screens -->
    <modules xmi:id="_MainModule" name="MainModule">

      <!-- Blank / placeholder screen -->
      <screens
          xmi:id="_BlankScreen"
          name="BlankScree"
          description=""
          x_dpi="x_dpi"
          y_dpi="y_dpi"
          screenSize="Medium"
          isMainPage="false">
        <!-- No UI elements -->
      </screens>

      <!-- Screen: Item details view -->
      <screens
          xmi:id="_ItemDetailsScreen"
          name="ItemDetailsScreen"
          description="View details of a selected item"
          x_dpi="x_dpi"
          y_dpi="y_dpi"
          screenSize="Medium"
          isMainPage="false">

        <!-- Action buttons on details screen -->
        <viewElements xsi:type="gui:Button"
            xmi:id="_ContactSellerButton"
            name="ContactSellerButton"
            description="Start a conversation with the seller"
            label="Contact Seller"
            buttonType="RaisedButton"
            actionType="OpenForm"/>

        <viewElements xsi:type="gui:Button"
            xmi:id="_StartOrderButton"
            name="StartOrderButton"
            description="Create an order for this item"
            label="Start Order"
            buttonType="RaisedButton"
            actionType="OpenForm"/>

        <viewElements xsi:type="gui:Button"
            xmi:id="_SuggestExchangeButton"
            name="SuggestExchangeButton"
            description="Suggest an exchange for this item"
            label="Suggest Exchange"
            buttonType="TextButton"
            actionType="OpenForm"/>

        <viewElements xsi:type="gui:Button"
            xmi:id="_AddReviewButton"
            name="AddReviewButton"
            description="Write a new review for this item"
            label="Add Review"
            buttonType="TextButton"
            actionType="OpenForm"/>

        <!-- Input fields used for item metadata -->
        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemTitleField"
            name="ItemTitleField"
            description="Title of the item."
            type="Text"
            validationRules="required"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemDescriptionField"
            name="ItemDescriptionField"
            description="Detailed item description."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemPriceField"
            name="ItemPriceField"
            description="Sale price if applicable."
            type="Number"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemStatusField"
            name="ItemStatusField"
            description="Item status (Available, Sold, Donated...)."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemTransactionTypeField"
            name="ItemTransactionTypeField"
            description="Transaction type (Donation/Sale/Exchange)."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemCommunityField"
            name="ItemCommunityField"
            description="Community where item is published."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_ItemPublicationDateField"
            name="ItemPublicationDateField"
            description="Publication date."
            type="Date"/>

        <!-- Data lists -->
        <viewElements xsi:type="gui:DataList"
            xmi:id="_ItemTagsList"
            name="ItemTagsList"
            description="Tag collection for item">
          <listSources href="#_TagsDataSource"/>
        </viewElements>

        <viewElements xsi:type="gui:DataList"
            xmi:id="_ItemReviewsList"
            name="ItemReviewsList"
            description="User reviews for item">
          <listSources href="#_ReviewsDataSource"/>
        </viewElements>

      </screens>

      <!-- Screen: List of all items -->
      <screens
          xmi:id="_ItemListScreen"
          name="ItemListScreen"
          description="Browse available items"
          x_dpi="x_dpi"
          y_dpi="y_dpi"
          screenSize="Medium"
          isMainPage="true">

        <!-- List that uses ItemsDataSource -->
        <viewElements xsi:type="gui:DataList"
            xmi:id="_ItemsList"
            name="ItemsList"
            description="List of available items">
          <listSources href="#_ItemsDataSource"/>
        </viewElements>

        <!-- Buttons for navigation from home screen -->
        <viewElements xsi:type="gui:Button"
            xmi:id="_ViewItemDetailsButton"
            name="ViewItemDetailsButton"
            description="Open selected item details"
            label="View Details"
            buttonType="TextButton"
            actionType="Navigate">
          <targetScreen href="#_ItemDetailsScreen"/>
        </viewElements>

        <viewElements xsi:type="gui:Button"
            xmi:id="_ProfileButton"
            name="ProfileButton"
            description="Open user profile"
            label="Profile"
            buttonType="IconButton"
            actionType="Navigate">
          <targetScreen href="#_BlankScreen"/>
        </viewElements>

        <viewElements xsi:type="gui:Button"
            xmi:id="_RegisterButton"
            name="RegisterButton"
            description="Open registration screen"
            label="Sign up"
            buttonType="TextButton"
            actionType="Navigate">
          <targetScreen href="#_BlankScreen"/>
        </viewElements>

        <!-- Filter/search UI fields -->
        <viewElements xsi:type="gui:InputField"
            xmi:id="_SearchItemsField"
            name="SearchItemsField"
            description="Search items by keywords."
            type="Search"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_CommunityFilterField"
            name="CommunityFilterField"
            description="Filter by community/faculty."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_StatusFilterField"
            name="StatusFilterField"
            description="Filter by item status."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_TagFilterField"
            name="TagFilterField"
            description="Filter by tag."
            type="Text"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_TransactionTypeFilterField"
            name="TransactionTypeFilterField"
            description="Filter by exchange type."
            type="Text"/>

      </screens>

      <!-- Screen: Login page -->
      <screens
          xmi:id="_LoginScreen"
          name="LoginScreen"
          description="User authentication screen"
          x_dpi="x_dpi"
          y_dpi="y_dpi"
          screenSize="Medium"
          isMainPage="false">

        <!-- Login methods -->
        <viewElements xsi:type="gui:Button"
            xmi:id="_PhoneLoginButton"
            name="PhoneLoginButton"
            description="Login using phone number"
            label="Sign in with phone number"
            buttonType="IconButton"
            actionType="Navigate">
          <targetScreen href="#_BlankScreen"/>
        </viewElements>

        <viewElements xsi:type="gui:Button"
            xmi:id="_OAuthLoginButton"
            name="OAuthLoginButton"
            description="Login with Google"
            label="Sign in with Google"
            buttonType="IconButton"
            actionType="Navigate">
          <targetScreen href="#_BlankScreen"/>
        </viewElements>

        <!-- Submit (OpenForm) instead of navigation -->
        <viewElements xsi:type="gui:Button"
            xmi:id="_SubmitLoginButton"
            name="SubmitLoginButton"
            description="Submit login and open items list"
            label="Sign in"
            buttonType="RaisedButton"
            actionType="OpenForm"/>

        <!-- Credentials fields -->
        <viewElements xsi:type="gui:InputField"
            xmi:id="_EmailFieldLogin"
            name="EmailFieldLogin"
            description="User email address"
            type="Email"
            validationRules="required;format:email;minLength:6;regex:^\\S+@\\S+\\.\\S+$"/>

        <viewElements xsi:type="gui:InputField"
            xmi:id="_PasswordFieldLogin"
            name="PasswordFieldLogin"
            description="User password"
            type="Password"
            validationRules="required;minLength:8;mustContainUpperCase;mustContainLowerCase;mustContainDigit;mustContainSpecialChars"/>
      </screens>

    </modules>
  </gui:GUIModel>

  <!-- ===================== -->
  <!-- Data sources used by screens -->
  <!-- ===================== -->

  <gui:DataSourceElement
      xmi:id="_ItemsDataSource"
      name="ItemsDataSource"
      dataSourceClassName="Item">
    <fields>title</fields>
    <fields>description</fields>
    <fields>price</fields>
    <fields>status</fields>
    <fields>publicationDate</fields>
    <fields>transactionType</fields>
  </gui:DataSourceElement>

  <gui:DataSourceElement
      xmi:id="_TagsDataSource"
      name="TagsDataSource"
      dataSourceClassName="Tag">
    <fields>name</fields>
  </gui:DataSourceElement>

  <gui:DataSourceElement
      xmi:id="_ReviewsDataSource"
      name="ReviewsDataSource"
      dataSourceClassName="Review">
    <fields>rating</fields>
    <fields>comment</fields>
    <fields>reviewDate</fields>
  </gui:DataSourceElement>

</xmi:XMI>
